function $(e){return document.querySelector(e)}let cropper,editor=void 0;function snackbar(e){$("#snackbarMsg").innerText=e,$("#snackbar").style.bottom="20px",setTimeout(()=>{$("#snackbar").style.bottom="-48px"},4e3)}editor="undefined"!=typeof data?new EditorJS({holder:"editor",placeholder:"Click here to start writing",tools:{header:Header,image:{class:ImageTool,inlineToolbar:!0,config:{endpoints:{byFile:"includes/upload.php"}}},embed:{class:Embed,inlineToolbar:!0,config:{services:{youtube:!0,vimeo:!0}}}},data:data,onReady:()=>{[].forEach.call(document.querySelectorAll("[contenteditable=true]"),e=>{e.dataset.gramm_editor="false"})},onChange:()=>{[].forEach.call(document.querySelectorAll("[contenteditable=true]"),e=>{e.dataset.gramm_editor="false"})}}):new EditorJS({holder:"editor",placeholder:"Click here to start writing",tools:{header:Header,image:{class:ImageTool,inlineToolbar:!0,config:{endpoints:{byFile:"includes/upload.php"}}},embed:{class:Embed,inlineToolbar:!0,config:{services:{youtube:!0,vimeo:!0}}}},onChange:()=>{[].forEach.call(document.querySelectorAll("[contenteditable=true]"),e=>{e.dataset.gramm_editor="false"})}}),$("#save").addEventListener("click",()=>{editor.save().then(e=>{AjaxRequest("includes/save.php",{data:JSON.stringify(e)}).then(e=>{if("done"==e)snackbar("Portfolio submitted for review");else{if("updated"!=e)return void snackbar(e);snackbar("Portfolio updated")}$("#draftStatus").innerText="Draft portfolio status: pending"})}).catch(e=>{console.log("Something went wrong",e)})}),$("#uplaodImage").addEventListener("click",()=>{$("body").classList.add("addProfileImage")}),$("#newProfile").addEventListener("change",()=>{if($("#newProfile").value){$("#loading").style.display="block",$("#cropper").src="";try{cropper.destroy()}catch(e){}let e=new FileReader;e.onload=(()=>{$("#loading").style.display="none",$("#cropper").src=e.result,$("#imageCropContainer").style.display="block",cropper=new Cropper($("#cropper"),{aspectRatio:1})}),e.readAsDataURL($("#newProfile").files[0])}}),$("#cancelImage").addEventListener("click",()=>{$("body").classList.remove("addProfileImage"),$("#newProfile").value="";try{cropper.destroy()}catch(e){}$("#cropper").src="",$("#imageCropContainer").style.display="none"}),$("#acceptImage").addEventListener("click",()=>{""!=$("#newProfile").value?AjaxRequest("includes/upload.php",{imageBlob:cropper.getCroppedCanvas().toDataURL(),urlOnly:"yes",profileImageSet:"yes"}).then(e=>{"failed"==e?snackbar("There was an issue with uploading"):(cropper.destroy(),$("#cropper").src="",$("#imageCropContainer").style.display="none",$("#profileImage").src=e,$("body").classList.remove("addProfileImage"),$("#newProfile").value="",snackbar("Profile picture updated"))}):snackbar("You must have an image uploaded")});