let type="";function $(e){return document.querySelector(e)}function snackbar(e){$("#snackbarMsg").innerText=e,$("#snackbar").style.bottom="20px",setTimeout(()=>{$("#snackbar").style.bottom="-48px"},4e3)}[].forEach.call(document.querySelectorAll(".memberCard"),e=>{if(e.dataset.id){let a=e.dataset.id,t=e.dataset.name,s=$(`#accept${a}`),d=$(`#fail${a}`),l=$(`#feedback${a}`);s.addEventListener("click",()=>{l.value?(type="pass",$("body").classList.add("inactive"),$("#txt").innerHTML=`Are you sure you would like to <b>APPROVE</b> ${t}'s portfolio?`,$("#dialog").dataset.student=a):(l.focus(),snackbar("You must provide feedback"))}),d.addEventListener("click",()=>{l.value?(type="fail",$("body").classList.add("inactive"),$("#txt").innerHTML=`Are you sure you would like to <b>DECLINE</b> ${t}'s portfolio?`,$("#dialog").dataset.student=a):(l.focus(),snackbar("You must provide feedback"))})}}),$("#newUser").addEventListener("click",()=>{$("body").classList.add("addStudent")}),$("#accept").addEventListener("click",()=>{let e=$("#dialog").dataset.student;console.log(e),AjaxRequest("includes/review.php",{active:type,feedback:$(`#feedback${e}`).value,userId:e}).then(a=>{if("Review sent"==a||"Portfolio passed"==a){type="",$("#dialog").dataset.student="-1",$("body").classList.remove("inactive");let t=$(`[data-id="${e}"]`);t.parentNode.removeChild(t),snackbar(a)}else snackbar(a)})}),$("#acceptNew").addEventListener("click",()=>{let e=$("#usernameNew").value,a=$("#firstNameNew").value,t=$("#lastNameNew").value,s=$("#emailNew").value,d=$("#profileNew"),l=$("#r1"),c=$("#r2"),i=$("#r3");if(""==d.value)snackbar("Please fill in all the fields");else if(l.checked||c.checked||i.checked){let n="";l.checked&&(n=l.value),c.checked&&(n=c.value),i.checked&&(n=i.value),AjaxRequest("includes/upload.php",{image:d.files[0],urlOnly:"yes"}).then(r=>{"failed"==r?snackbar("Image failed to upload."):AjaxRequest("includes/addUser.php",{username:e,firstName:a,lastName:t,email:s,class:n,profile:r}).then(e=>{"done"==e?(snackbar("Student added"),$("body").classList.remove("addStudent"),$("#usernameNew").value="",$("#firstNameNew").value="",$("#lastNameNew").value="",$("#emailNew").value="",d.value="",l.checked=!1,c.checked=!1,i.checked=!1):snackbar(e)})})}else snackbar("Please add a class")}),$("#cancel").addEventListener("click",()=>{type="",$("body").classList.remove("inactive"),$("#dialog").dataset.student="-1"}),$("#cancelNew").addEventListener("click",()=>{$("body").classList.remove("addStudent")});